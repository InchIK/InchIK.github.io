<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>個人履歷｜技術領域專長</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@600&family=Chocolate+Classical+Sans&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/style.css" />
    <!-- Google reCAPTCHA V2 -->
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <!-- EmailJS SDK -->
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"
    ></script>
    <script type="text/javascript">
      (function () {
        emailjs.init("K52jTL0VqjVtVLU3K");
      })();
    </script>
    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-analytics.js";
      import {
        getAuth,
        GoogleAuthProvider,
        signInWithPopup,
        onAuthStateChanged,
        signOut,
      } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-auth.js";
      import {
        getFirestore,
        doc,
        getDoc,
        setDoc,
        serverTimestamp,
      } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-firestore.js";

      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      const firebaseConfig = {
        apiKey: "AIzaSyAe56g4eszcdqKtmo_Q439Mrvtp9_oP9Sk",
        authDomain: "inchijob-b49e8.firebaseapp.com",
        projectId: "inchijob-b49e8",
        storageBucket: "inchijob-b49e8.firebasestorage.app",
        messagingSenderId: "889448714693",
        appId: "1:889448714693:web:d1c90f383424edcd317bac",
        measurementId: "G-97HM4SPF84",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);
      const auth = getAuth(app);
      const provider = new GoogleAuthProvider();
      const db = getFirestore(app);

      window.firebaseTools = {
        auth,
        provider,
        signInWithPopup,
        onAuthStateChanged,
        signOut,
        firestore: {
          db,
          doc,
          getDoc,
          setDoc,
          serverTimestamp,
        },
      };
    </script>
    <script defer src="js/main.js"></script>
  </head>
  <body>
    <header class="hero">
      <div class="hero__content">
        <div class="hero__layout">
          <div class="profile">
            <div class="profile__avatar-wrap">
              <img
                class="profile__avatar"
                id="profileAvatar"
                src="assets/photos/profile.jpg"
                alt="個人頭像"
              />
            </div>
            <h1 class="profile__name" id="profileName">[ InchI ]</h1>
            <div class="profile__contact-wrapper">
              <div class="profile__contact" id="profileEmail">
                kungyc@gmail.com
              </div>
              <button
                type="button"
                class="message-btn"
                id="openMessageModal"
                aria-label="留言"
                title="留言給我"
              >
                留
              </button>
            </div>
            <div class="profile__tags-wrapper">
              <div class="admin-tag" id="openLogin" role="button" tabindex="0">
                <span class="admin-tag__ad">AD</span
                ><span class="admin-tag__min">MIN</span>
              </div>
              <div id="customAdminTags" class="custom-admin-tags-container"></div>
            </div>
          </div>
          <div class="hero__bio">
            <p class="profile__summary" id="profileSummary">
              和我那時財和我那時財，經培養點這裡進一步，笑著近年來裝備，臉上下一頁，最後可能生存臉色引起兄弟年輕人減肥女友在。
            </p>
          </div>
        </div>

        <!-- 分享連結區塊 -->
        <div class="share-links-section">
          <div id="shareLinksGrid" class="share-links-grid"></div>
        </div>
      </div>
    </header>

    <div class="admin-bar" id="adminBar" hidden data-state="off">
      <div class="admin-bar__actions">
        <button type="button" id="editProfile" class="admin-btn">
          編輯自我介紹
        </button>
        <button type="button" id="editAdminTags" class="admin-btn">
          自訂標籤
        </button>
        <button type="button" id="editAboutMe" class="admin-btn">
          編輯關於我
        </button>
        <button type="button" id="editSkillTags" class="admin-btn">
          編輯技能標籤
        </button>
        <button type="button" id="editShareLinks" class="admin-btn">
          編輯分享連結
        </button>
        <button type="button" id="editTellMe" class="admin-btn">
          編輯留言提示
        </button>
        <button type="button" id="openPanel" class="admin-btn">新增區塊</button>
        <button type="button" id="logout" class="admin-btn admin-btn--quiet">
          登出
        </button>
      </div>
    </div>

    <main class="content">
      <section class="section">
        <!-- 關於我 -->
        <h2 class="section__title">
          <span class="section__title-highlight section__title-highlight--about"
            >{ 關於我 }</span
          >
        </h2>
        <div class="about-content">
          <!-- 棲息地 -->
          <div class="about-item">
            <span class="about-item__label">棲息地：</span>
            <span id="aboutLocation" class="about-item__value"></span>
          </div>

          <!-- 經歷 -->
          <div class="about-item">
            <div class="about-item__label">經歷：</div>
            <div id="experienceList" class="about-item__content"></div>
          </div>

          <!-- 任職職務 -->
          <div class="about-item">
            <div class="about-item__label">適任職務：</div>
            <div
              id="positionList"
              class="about-item__content position-tags"
            ></div>
          </div>

          <!-- 學歷 -->
          <div class="about-item">
            <div class="about-item__label">學歷：</div>
            <div
              id="educationList"
              class="about-item__content education-tags"
            ></div>
          </div>

          <!-- 專業證書 -->
          <div class="about-item">
            <div class="about-item__label">專業證書：</div>
            <div
              id="certificateList"
              class="about-item__content certificate-grid"
            ></div>
          </div>

          <!-- 個人網站 -->
          <div class="about-item">
            <div class="about-item__label">個人相關網站：</div>
            <div
              id="websiteList"
              class="about-item__content website-list"
            ></div>
          </div>
        </div>

        <!-- 技能列表 -->
        <h2 class="section__title">
          <span
            class="section__title-highlight section__title-highlight--skills"
            >{ 技能列表 }</span
          >
        </h2>
        <div id="skillTagsContainer" class="skill-tags-container"></div>

        <!-- 專業領域項目 -->
        <h2 class="section__title">
          <span class="section__title-highlight">{ 專業領域項目 }</span>
        </h2>
        <div class="skill-grid" id="skillGrid"></div>
      </section>
    </main>

    <footer class="footer"></footer>

    <dialog class="modal" id="profileModal">
      <form
        method="dialog"
        class="modal__content modal__content--profile"
        id="profileForm"
      >
        <h2>編輯自我介紹</h2>
        <label class="field">
          <span>顯示名稱（含括號）</span>
          <input type="text" id="profileNameInput" required />
        </label>
        <label class="field">
          <span>Email</span>
          <input type="email" id="profileEmailInput" required />
        </label>
        <label class="field">
          <span>簡介</span>
          <textarea id="profileSummaryInput" rows="4" required></textarea>
        </label>
        <label class="field">
          <span>頭像圖片來源（可填網址或本地路徑）</span>
          <input
            type="text"
            id="profileAvatarInput"
            placeholder="assets/photos/profile.jpg"
          />
        </label>
        <p class="modal__hint">※ 若留空則使用預設頭像。</p>
        <div class="modal__actions">
          <button type="button" id="cancelProfile">取消</button>
          <button type="submit" class="primary">儲存</button>
        </div>
      </form>
    </dialog>

    <dialog class="modal" id="panelModal">
      <form
        method="dialog"
        class="modal__content modal__content--panel"
        id="panelForm"
      >
        <div class="modal__header">
          <h2>新增技術區塊</h2>
          <button
            type="button"
            class="modal__close"
            id="closePanel"
            aria-label="關閉"
          >
            ×
          </button>
        </div>
        <label class="field">
          <span>標題</span>
          <input type="text" id="fieldTitle" required />
        </label>
        <label class="field">
          <span>技術介紹</span>
          <textarea id="fieldDescription" rows="4" required></textarea>
        </label>
        <label class="field">
          <span>圖片網址 (可留空)</span>
          <input
            type="text"
            id="fieldImageUrl"
            placeholder="https://example.com/image.jpg"
          />
        </label>
        <div class="modal__actions">
          <button type="submit" class="primary">新增</button>
        </div>
      </form>
    </dialog>

    <dialog class="modal" id="projectManagerModal">
      <div
        class="modal__content modal__content--project-manager"
        id="projectManagerContent"
      >
        <div class="modal__header">
          <h2 id="projectManagerTitle">管理專案</h2>
          <button
            type="button"
            class="modal__close"
            id="closeProjectManager"
            aria-label="關閉"
          >
            ×
          </button>
        </div>
        <div id="projectList" class="project-list"></div>
        <div class="modal__actions modal__actions--split">
          <button type="button" id="addProject" class="primary">
            新增專案
          </button>
        </div>
      </div>
    </dialog>

    <dialog class="modal" id="projectEditorModal">
      <form
        method="dialog"
        class="modal__content modal__content--project-editor"
        id="projectForm"
      >
        <div class="modal__header">
          <h2 id="projectEditorTitle">專案內容</h2>
          <button
            type="button"
            class="modal__close"
            id="cancelProject"
            aria-label="關閉"
          >
            ×
          </button>
        </div>
        <label class="field">
          <span>專案名稱</span>
          <input type="text" id="projectNameInput" required />
        </label>
        <label class="field">
          <span>專案說明 (支援 Markdown)</span>
          <textarea id="projectSummaryInput" rows="6"></textarea>
        </label>
        <div class="field">
          <span>媒體項目</span>
          <div class="media-hint">可加入圖片或檔案連結並提供說明文字。</div>
          <div id="projectMediaList" class="media-list"></div>
          <button
            type="button"
            id="addMediaItem"
            class="admin-btn admin-btn--ghost"
          >
            新增媒體
          </button>
        </div>
        <div class="modal__actions">
          <button type="submit" class="primary">儲存專案</button>
        </div>
      </form>
    </dialog>

    <dialog class="modal" id="skillDetailModal">
      <div
        class="modal__content modal__content--skill-detail"
        id="skillDetailContent"
      >
        <div class="modal__header">
          <h2 id="detailSkillTitle"></h2>
          <button
            type="button"
            class="modal__close"
            id="closeSkillDetail"
            aria-label="關閉"
          >
            ×
          </button>
        </div>
        <div id="detailSkillIntro" class="detail-skill-intro"></div>
        <nav id="projectNavigationList" class="project-navigation-list"></nav>
        <div id="detailProjectContainer" class="detail-projects"></div>
        <button
          type="button"
          class="scroll-to-top-btn"
          id="scrollToTopBtn"
          aria-label="回到專案列表"
          title="回到專案列表"
        >
          ↑
        </button>
      </div>
    </dialog>

    <dialog class="modal" id="imagePreviewModal">
      <div class="modal__content modal__content--image-preview">
        <div class="modal__header">
          <h2 id="imagePreviewTitle">圖片預覽</h2>
          <button
            type="button"
            class="modal__close"
            id="closeImagePreview"
            aria-label="關閉"
          >
            ×
          </button>
        </div>
        <div class="image-preview-container">
          <img id="imagePreviewImg" src="" alt="預覽圖片" />
        </div>
      </div>
    </dialog>

    <dialog class="modal" id="skillTagsModal">
      <div class="modal__content modal__content--skill-tags">
        <div class="modal__header">
          <h2>管理技能標籤</h2>
          <button
            type="button"
            class="modal__close"
            id="closeSkillTags"
            aria-label="關閉"
          >
            ×
          </button>
        </div>
        <div class="skill-tags-manager">
          <div id="skillTagsList" class="skill-tags-list"></div>
          <div class="skill-tags-input-area">
            <input
              type="text"
              id="newSkillTagInput"
              placeholder="輸入新技能標籤"
              class="skill-tags-input"
            />
            <button type="button" id="addSkillTag" class="admin-btn primary">
              新增標籤
            </button>
          </div>
        </div>
      </div>
    </dialog>

    <dialog class="modal" id="aboutMeModal">
      <div class="modal__content modal__content--about-me">
        <div class="modal__header">
          <h2>編輯關於我</h2>
          <button
            type="button"
            class="modal__close"
            id="closeAboutMe"
            aria-label="關閉"
          >
            ×
          </button>
        </div>
        <div class="about-me-manager">
          <!-- 棲息地 -->
          <div class="field">
            <span>📍 棲息地</span>
            <input
              type="text"
              id="aboutLocationInput"
              placeholder="例如：台北市, 台灣"
            />
          </div>

          <!-- 經歷管理 -->
          <div class="field">
            <span>💼 經歷</span>
            <div
              id="experienceManagerList"
              class="experience-manager-list"
            ></div>
            <button
              type="button"
              id="addExperience"
              class="admin-btn admin-btn--ghost"
            >
              新增經歷
            </button>
          </div>

          <!-- 職務管理 -->
          <div class="field">
            <span>🧑‍💼 任職職務</span>
            <div id="positionManagerList" class="position-manager-list"></div>
          </div>

          <!-- 學歷管理 -->
          <div class="field">
            <span>🎓 學歷</span>
            <div id="educationManagerList" class="education-manager-list"></div>
            <button
              type="button"
              id="addEducation"
              class="admin-btn admin-btn--ghost"
            >
              新增學歷
            </button>
          </div>

          <!-- 證書管理 -->
          <div class="field">
            <span>📜 專業證書</span>
            <div
              id="certificateManagerList"
              class="certificate-manager-list"
            ></div>
            <button
              type="button"
              id="addCertificate"
              class="admin-btn admin-btn--ghost"
            >
              新增證書
            </button>
          </div>

          <!-- 網站管理 -->
          <div class="field">
            <span>🔗 個人相關網站</span>
            <div id="websiteManagerList" class="website-manager-list"></div>
            <button
              type="button"
              id="addWebsite"
              class="admin-btn admin-btn--ghost"
            >
              新增網站
            </button>
          </div>
        </div>
        <div class="modal__actions">
          <button type="button" id="saveAboutMe" class="primary">儲存</button>
        </div>
      </div>
    </dialog>

    <dialog class="modal" id="adminTagModal">
      <form method="dialog" class="modal__content modal__content--admin-tags" id="adminTagForm">
        <div class="modal__header">
          <h2>管理自訂標籤</h2>
          <button
            type="button"
            class="modal__close"
            id="closeAdminTagModal"
            aria-label="關閉"
          >
            &times;
          </button>
        </div>

        <div id="adminTagList" class="admin-tags-list"></div>

        <hr />

        <label class="field" for="adminTagTextInput">
          <span>標籤文字（前段,後段）</span>
          <input
            type="text"
            id="adminTagTextInput"
            placeholder="前段,後段"
            autocomplete="off"
            required
          />
        </label>

        <div class="field">
          <span>前段背景顏色（選填，預設隨機）</span>
          <div class="admin-tag-color">
            <input type="color" id="adminTagFrontBgInput" value="#FFFFFF" />
            <button type="button" class="admin-tag-color__random" id="adminTagFrontRandom">使用隨機</button>
            <span class="admin-tag-color__preview" id="adminTagFrontPreview"></span>
            <span class="admin-tag-color__value" id="adminTagFrontValue">隨機</span>
          </div>
        </div>

        <div class="field">
          <span>後段背景顏色（選填，預設隨機）</span>
          <div class="admin-tag-color">
            <input type="color" id="adminTagBackBgInput" value="#EA0000" />
            <button type="button" class="admin-tag-color__random" id="adminTagBackRandom">使用隨機</button>
            <span class="admin-tag-color__preview" id="adminTagBackPreview"></span>
            <span class="admin-tag-color__value" id="adminTagBackValue">隨機</span>
          </div>
        </div>

        <p class="admin-tag-hint">若未自訂顏色，系統會自動套用預設隨機配色。</p>

        <div class="modal__actions">
          <button type="button" id="cancelAdminTag">取消</button>
          <button type="submit" class="primary">新增標籤</button>
        </div>
      </form>
    </dialog>

    <dialog class="modal" id="shareLinksModal">
      <div class="modal__content modal__content--share-links">
        <div class="modal__header">
          <h2>管理分享連結</h2>
          <button
            type="button"
            class="modal__close"
            id="closeShareLinks"
            aria-label="關閉"
          >
            ×
          </button>
        </div>
        <div class="share-links-manager">
          <div
            id="shareLinksManagerList"
            class="share-links-manager-list"
          ></div>
          <button
            type="button"
            id="addShareLink"
            class="admin-btn admin-btn--ghost"
          >
            新增分享連結
          </button>
        </div>
        <div class="modal__actions">
          <button type="button" id="saveShareLinks" class="primary">
            儲存
          </button>
        </div>
      </div>
    </dialog>

    <dialog class="modal" id="tellMeModal">
      <div class="modal__content modal__content--tell-me">
        <div class="modal__header">
          <h2>管理留言區提示</h2>
          <button
            type="button"
            class="modal__close"
            id="closeTellMe"
            aria-label="關閉"
          >
            ×
          </button>
        </div>
        <div class="tell-me-manager">
          <div class="field">
            <label for="tellMeTitle">標題</label>
            <input
              type="text"
              id="tellMeTitle"
              placeholder="例如：可以找我做什麼"
            />
          </div>
          <div class="field">
            <label>列表項目</label>
            <div id="tellMeListManager" class="tell-me-list-manager"></div>
            <button
              type="button"
              id="addTellMeItem"
              class="admin-btn admin-btn--ghost"
            >
              新增項目
            </button>
          </div>
        </div>
        <div class="modal__actions">
          <button type="button" id="saveTellMe" class="primary">
            儲存
          </button>
        </div>
      </div>
    </dialog>

    <dialog class="modal" id="messageModal">
      <form
        method="dialog"
        class="modal__content modal__content--message"
        id="messageForm"
      >
        <div class="modal__header">
          <h2>留言給我</h2>
          <button
            type="button"
            class="modal__close"
            id="closeMessage"
            aria-label="關閉"
          >
            ×
          </button>
        </div>
        <div class="message-body">
          <aside class="message-purpose">
            <h3 class="message-purpose__title">可以找我做甚麼</h3>
            <ol class="message-purpose__list">
              <li>告解</li>
              <li>認親</li>
              <li>接案</li>
              <li>批評</li>
              <li>鼓勵</li>
              <li>規劃</li>
            </ol>
          </aside>
          <div class="message-fields">
            <label class="field">
              <span>稱呼</span>
              <input
                type="text"
                id="messageName"
                name="from_name"
                required
                placeholder="請輸入您的稱呼"
              />
            </label>
            <label class="field">
              <span>Email</span>
              <input
                type="email"
                id="messageEmail"
                name="reply_to"
                required
                placeholder="請輸入您的 Email"
              />
            </label>
            <label class="field">
              <span>內容</span>
              <textarea
                id="messageContent"
                name="message"
                rows="6"
                required
                placeholder="請輸入留言內容"
              ></textarea>
            </label>
            <!-- reCAPTCHA V2 容器 -->
            <div class="recaptcha-container">
              <div
                class="g-recaptcha"
                id="messageRecaptcha"
                data-sitekey="6LeSs_ArAAAAAG4L6-RZ7lHYdz_QFkHDbpkw9K74"
              ></div>
            </div>
            <div id="messageStatus" class="message-status"></div>
          </div>
        </div>
        <div class="modal__actions">
          <button type="button" id="cancelMessage">取消</button>
          <button type="submit" class="primary" id="sendMessage">
            送出留言
          </button>
        </div>
      </form>
    </dialog>
  </body>
</html>
